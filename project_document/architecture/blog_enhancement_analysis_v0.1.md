# Blog功能增强分析文档

**版本**: v0.1
**创建时间**: [2023-07-12 11:20:00 +08:00]
**创建者**: AR (架构师)

## 1. 功能概述
本文档分析在黑马点评系统中为个人主页页面添加"我的"和"关注"按钮，以及在Blog实体类中添加"是否已读"字段的技术实现方案。

## 2. 现有架构分析

### 2.1 前端架构
个人主页页面(user-info.html)使用Vue.js框架，通过axios调用后端API获取数据。页面已有笔记列表功能，但没有分类显示和已读标记功能。

当前页面结构：
- 顶部导航栏
- 用户基本信息区域
- 个人简介区域
- 内容区域（包含笔记、评价、粉丝、关注四个标签页）
  - 笔记标签页：显示用户发布的笔记列表
  - 关注标签页：显示用户关注的人的笔记列表

### 2.2 后端架构
Blog实体类(Blog.java)是笔记功能的核心实体类，对应数据库表tb_blog。

相关API：
- `/blog/of/me`: 获取当前登录用户的博客列表
- `/blog/of/follow`: 获取关注用户的博客列表
- `/blog/read/{id}`: 标记博客为已读

### 2.3 数据库结构
tb_blog表结构与Blog实体类对应，但没有is_read字段。

## 3. 设计原则考虑

### 3.1 KISS原则
保持设计简单，只添加必要的字段和功能，避免不必要的复杂性。

### 3.2 SOLID原则
- 单一职责原则：Blog实体类只负责笔记数据的存储和传输
- 开闭原则：通过添加新字段扩展功能，而不修改现有功能

### 3.3 高内聚低耦合
确保新增功能与现有功能松散耦合，便于后续维护和扩展。

## 4. 技术方案设计

### 4.1 数据库修改
在tb_blog表中添加is_read字段，类型为tinyint，默认值为0（未读）。

但考虑到：
1. 已读状态是针对特定用户的，同一篇博客对不同用户的已读状态不同
2. 直接在tb_blog表添加is_read字段不合理

更好的方案是：
1. 创建新表tb_blog_read记录用户的博客阅读状态
2. 或使用Redis存储用户的博客阅读状态

### 4.2 实体类修改
在Blog.java中添加isRead字段，类型为Boolean，使用@TableField(exist = false)注解标记为非数据库字段。

### 4.3 前端修改
在user-info.html页面的笔记标签页中添加"我的"和"关注"两个按钮，通过切换按钮显示不同来源的笔记。

## 5. 技术风险与挑战

### 5.1 数据一致性
需要确保用户的已读状态在多设备间保持一致。

### 5.2 性能考虑
已读状态的存储和查询可能会增加系统负担，需要考虑性能优化。

### 5.3 用户体验
前端页面的修改需要保证良好的用户体验，避免页面跳动和闪烁。

## 6. 更新日志
| 时间 | 版本 | 更新内容 | 更新原因 |
|------|------|----------|----------|
| [2023-07-12 11:20:00 +08:00] | v0.1 | 初始版本 | 项目启动，初步分析 |