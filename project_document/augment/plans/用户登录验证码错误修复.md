# 用户登录验证码错误修复计划

## 问题描述
用户使用账号密码登录时提示验证码错误，原因是后端只实现了验证码登录逻辑，未支持密码登录模式。

## 修复目标
实现完整的双模式登录支持（验证码登录 + 密码登录）

## 实施计划

### 1. 后端登录逻辑修改
**文件：** `src/main/java/com/hmdp/service/impl/UserServiceImpl.java`
**方法：** `login(LoginFormDTO loginForm)`

**修改内容：**
- 添加登录方式判断逻辑
- 实现密码登录验证
- 保持验证码登录逻辑
- 统一token生成返回

### 2. 具体实现步骤
1. 检查LoginFormDTO中password和code字段
2. 根据字段值判断登录方式
3. 密码登录：查询用户 + 验证密码
4. 验证码登录：保持现有逻辑
5. 统一处理用户信息和token生成

### 3. 预期结果
- 密码登录正常工作
- 验证码登录保持不变
- 错误提示准确

## 风险评估
- 低风险：仅修改业务逻辑
- 向后兼容：不影响现有功能